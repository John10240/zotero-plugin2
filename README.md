# Zotero S3 åŒæ­¥æ’ä»¶

[![ç‰ˆæœ¬](https://img.shields.io/github/v/release/John10240/zotero-plugin2)](https://github.com/John10240/zotero-plugin2/releases)
[![è®¸å¯è¯](https://img.shields.io/github/license/John10240/zotero-plugin2)](LICENSE)
[![ä¸‹è½½é‡](https://img.shields.io/github/downloads/John10240/zotero-plugin2/total)](https://github.com/John10240/zotero-plugin2/releases)

è¿™æ˜¯ä¸€ä¸ªç”¨äºå°† Zotero é™„ä»¶åŒæ­¥åˆ° S3 å…¼å®¹å­˜å‚¨çš„æ’ä»¶ã€‚

> **âš ï¸ æµ‹è¯•ç‰ˆæœ¬è­¦å‘Š**
>
> å½“å‰ç‰ˆæœ¬ä¸º **v0.1.0 æµ‹è¯•ç‰ˆ**ï¼ŒåŠŸèƒ½å°šåœ¨å¼€å‘ä¸­ã€‚ä½¿ç”¨å‰è¯·ï¼š
> - ğŸ“¦ å¤‡ä»½ä½ çš„ Zotero æ•°æ®åº“å’Œé™„ä»¶
> - ğŸ§ª åœ¨æµ‹è¯•ç¯å¢ƒä¸­å…ˆè¯•ç”¨
> - ğŸ› é‡åˆ°é—®é¢˜è¯·æäº¤ [Issue](https://github.com/John10240/zotero-plugin2/issues)
>
> **å·²çŸ¥é™åˆ¶**ï¼š
> - â³ æš‚ä¸æ”¯æŒè‡ªåŠ¨åŒæ­¥ï¼ˆè®¡åˆ’ä¸­ï¼‰
> - â³ æš‚ä¸æ”¯æŒä» S3 ä¸‹è½½æ–‡ä»¶çš„ UI é›†æˆï¼ˆAPI å·²å®ç°ï¼‰
> - â³ æš‚ä¸æ”¯æŒè‡ªåŠ¨åˆ é™¤ S3 ä¸Šçš„æ–‡ä»¶

## åŠŸèƒ½ç‰¹æ€§

- âœ… å°† Zotero é™„ä»¶ä¸Šä¼ åˆ° S3 å…¼å®¹å­˜å‚¨
- âœ… æ”¯æŒå¢é‡åŒæ­¥ï¼ˆä»…åŒæ­¥å˜æ›´çš„æ–‡ä»¶ï¼‰
- âœ… æ”¯æŒä»»ä½• S3 å…¼å®¹çš„å¯¹è±¡å­˜å‚¨ï¼ˆAWS S3ã€MinIOã€é˜¿é‡Œäº‘ OSS ç­‰ï¼‰
- âœ… å¯é…ç½®çš„æ–‡ä»¶å‰ç¼€
- âœ… è¿æ¥æµ‹è¯•åŠŸèƒ½
- âœ… åŒæ­¥è¿›åº¦æ˜¾ç¤º

## å®‰è£…

### æ­£å¼ç‰ˆå®‰è£…

1. ä» [Releases é¡µé¢](https://github.com/John10240/zotero-plugin2/releases) ä¸‹è½½æœ€æ–°çš„ `.xpi` æ–‡ä»¶
2. åœ¨ Zotero ä¸­ï¼Œæ‰“å¼€ **å·¥å…· â†’ æ’ä»¶**
3. ç‚¹å‡»å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡ï¼Œé€‰æ‹© **"ä»æ–‡ä»¶å®‰è£…æ’ä»¶"**
4. é€‰æ‹©ä¸‹è½½çš„ `.xpi` æ–‡ä»¶
5. é‡å¯ Zotero

### æµ‹è¯•ç‰ˆå®‰è£…

å¦‚æœä½ æƒ³æµ‹è¯•å¼€å‘ä¸­çš„åŠŸèƒ½ï¼Œå¯ä»¥ä» [Actions](https://github.com/John10240/zotero-plugin2/actions) é¡µé¢ä¸‹è½½æœ€æ–°æ„å»ºçš„æµ‹è¯•ç‰ˆæœ¬ã€‚

**æ³¨æ„**ï¼šæµ‹è¯•ç‰ˆå¯èƒ½ä¸ç¨³å®šï¼Œè¯·è°¨æ…ä½¿ç”¨ï¼

### ç³»ç»Ÿè¦æ±‚

- Zotero 7.0+ (Beta ç‰ˆæœ¬)
- Windows / macOS / Linux

## é…ç½®

1. æ‰“å¼€ Zotero -> ç¼–è¾‘ -> è®¾ç½® -> S3 åŒæ­¥è®¾ç½®
2. é…ç½®ä»¥ä¸‹ä¿¡æ¯ï¼š

   - **S3 ç«¯ç‚¹**: S3 æœåŠ¡çš„ç«¯ç‚¹ URLï¼ˆä¾‹å¦‚ï¼š`https://s3.amazonaws.com`ï¼‰
   - **åŒºåŸŸ**: S3 åŒºåŸŸï¼ˆä¾‹å¦‚ï¼š`us-east-1`ï¼‰
   - **å­˜å‚¨æ¡¶åç§°**: ä½ çš„ S3 å­˜å‚¨æ¡¶åç§°
   - **è®¿é—®å¯†é’¥ ID**: S3 è®¿é—®å¯†é’¥ ID
   - **ç§˜å¯†è®¿é—®å¯†é’¥**: S3 ç§˜å¯†è®¿é—®å¯†é’¥
   - **æ–‡ä»¶å‰ç¼€**: å­˜å‚¨åœ¨ S3 ä¸­çš„æ–‡ä»¶è·¯å¾„å‰ç¼€ï¼ˆé»˜è®¤ï¼š`zotero-attachments`ï¼‰

3. ç‚¹å‡»"æµ‹è¯•è¿æ¥"æŒ‰é’®éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®

## ä½¿ç”¨æ–¹æ³•

### æ‰‹åŠ¨åŒæ­¥

1. æ‰“å¼€ Zotero
2. ç‚¹å‡»èœå•æ  å·¥å…· -> åŒæ­¥åˆ° S3
3. æ’ä»¶ä¼šè‡ªåŠ¨æ£€æµ‹æ‰€æœ‰éœ€è¦åŒæ­¥çš„é™„ä»¶å¹¶å¼€å§‹ä¸Šä¼ 
4. åŒæ­¥è¿›åº¦ä¼šæ˜¾ç¤ºåœ¨å¼¹å‡ºçª—å£ä¸­

### è‡ªåŠ¨åŒæ­¥

åœ¨è®¾ç½®ä¸­å‹¾é€‰"å¯ç”¨è‡ªåŠ¨åŒæ­¥"å³å¯å¯ç”¨è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ï¼ˆè®¡åˆ’ä¸­ï¼‰ã€‚

## S3 å…¼å®¹å­˜å‚¨é…ç½®ç¤ºä¾‹

### AWS S3

```
ç«¯ç‚¹: https://s3.amazonaws.com
åŒºåŸŸ: us-east-1 (æˆ–å…¶ä»–åŒºåŸŸ)
```

### MinIO

```
ç«¯ç‚¹: http://localhost:9000 (æˆ–ä½ çš„ MinIO æœåŠ¡å™¨åœ°å€)
åŒºåŸŸ: us-east-1 (MinIO é»˜è®¤åŒºåŸŸ)
```

### é˜¿é‡Œäº‘ OSS

```
ç«¯ç‚¹: https://oss-cn-hangzhou.aliyuncs.com (æ ¹æ®ä½ çš„åŒºåŸŸä¿®æ”¹)
åŒºåŸŸ: oss-cn-hangzhou (æ ¹æ®ä½ çš„åŒºåŸŸä¿®æ”¹)
```

### è…¾è®¯äº‘ COS

```
ç«¯ç‚¹: https://cos.ap-guangzhou.myqcloud.com (æ ¹æ®ä½ çš„åŒºåŸŸä¿®æ”¹)
åŒºåŸŸ: ap-guangzhou (æ ¹æ®ä½ çš„åŒºåŸŸä¿®æ”¹)
```

## å·¥ä½œåŸç†

1. æ’ä»¶ä¼šæ‰«æ Zotero åº“ä¸­çš„æ‰€æœ‰é™„ä»¶æ–‡ä»¶
2. è®¡ç®—æ¯ä¸ªæ–‡ä»¶çš„ MD5 å“ˆå¸Œå€¼
3. å°†å“ˆå¸Œå€¼ä¸ä¸Šæ¬¡åŒæ­¥æ—¶çš„å“ˆå¸Œå€¼å¯¹æ¯”
4. åªä¸Šä¼ æœ‰å˜åŒ–çš„æ–‡ä»¶åˆ° S3
5. è®°å½•åŒæ­¥æ—¶é—´å’Œæ–‡ä»¶å“ˆå¸Œå€¼

## ç‰ˆæœ¬å†å²

### v0.1.0 (æµ‹è¯•ç‰ˆ) - å½“å‰ç‰ˆæœ¬

**æ–°åŠŸèƒ½**ï¼š
- âœ¨ å®ç° S3 å®¢æˆ·ç«¯å’ŒåŒæ­¥ç®¡ç†å™¨
- âœ¨ æ”¯æŒæ‰‹åŠ¨åŒæ­¥åˆ° S3
- âœ¨ è¿æ¥æµ‹è¯•åŠŸèƒ½
- âœ¨ å¢é‡åŒæ­¥æ”¯æŒ
- âœ¨ å¤šè¯­è¨€æ”¯æŒï¼ˆä¸­æ–‡/è‹±æ–‡ï¼‰

**å¼€å‘åŠŸèƒ½**ï¼š
- ğŸš§ è‡ªåŠ¨åŒæ­¥ï¼ˆè®¡åˆ’ä¸­ï¼‰
- ğŸš§ ä» S3 ä¸‹è½½æ–‡ä»¶ UIï¼ˆAPI å·²å®ç°ï¼‰
- ğŸš§ æ–‡ä»¶åˆ é™¤åŠŸèƒ½

æŸ¥çœ‹å®Œæ•´çš„ [ç‰ˆæœ¬å‘å¸ƒè®°å½•](https://github.com/John10240/zotero-plugin2/releases)

## è´¡çŒ®ä¸åé¦ˆ

### æŠ¥å‘Šé—®é¢˜

å¦‚æœä½ é‡åˆ° Bug æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ [å·²çŸ¥é—®é¢˜](https://github.com/John10240/zotero-plugin2/issues)
2. å¦‚æœé—®é¢˜æœªè¢«æŠ¥å‘Šï¼Œ[åˆ›å»ºæ–° Issue](https://github.com/John10240/zotero-plugin2/issues/new)
3. æä¾›è¯¦ç»†ä¿¡æ¯ï¼šZotero ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿã€é”™è¯¯æ—¥å¿—ç­‰

### å‚ä¸å¼€å‘

æ¬¢è¿æäº¤ Pull Requestï¼è¯·æŸ¥çœ‹ä¸‹æ–¹çš„å¼€å‘éƒ¨åˆ†äº†è§£å¦‚ä½•æ„å»ºé¡¹ç›®ã€‚

## å¼€å‘

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm æˆ– pnpm
- Zotero 7 Beta

### æ„å»º

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
npm start

# ç”Ÿäº§æ„å»º
npm run build
```

æ„å»ºäº§ç‰©ä½äº `.scaffold/build/` ç›®å½•ã€‚

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ s3Client.ts        # S3 å®¢æˆ·ç«¯å°è£…
â”‚   â”œâ”€â”€ syncManager.ts     # åŒæ­¥ç®¡ç†å™¨
â”‚   â”œâ”€â”€ examples.ts        # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ preferenceScript.ts # åå¥½è®¾ç½®è„šæœ¬
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ hooks.ts               # ç”Ÿå‘½å‘¨æœŸé’©å­
â”œâ”€â”€ addon.ts               # æ’ä»¶ä¸»ç±»
â””â”€â”€ index.ts               # å…¥å£æ–‡ä»¶
```

## å¸¸è§é—®é¢˜

### Q: æ”¯æŒä¸‹è½½æ–‡ä»¶å—ï¼Ÿ

A: ç›®å‰ç‰ˆæœ¬ä¸»è¦å®ç°äº†ä¸Šä¼ åŠŸèƒ½ã€‚ä¸‹è½½åŠŸèƒ½çš„ API å·²ç»å®ç°ï¼Œä½†è¿˜éœ€è¦åœ¨ UI ä¸­é›†æˆã€‚

### Q: æ–‡ä»¶ä¼šè¢«å‹ç¼©å—ï¼Ÿ

A: ä¸ä¼šã€‚æ–‡ä»¶ä»¥åŸå§‹æ ¼å¼ä¸Šä¼ åˆ° S3ã€‚

### Q: å¦‚ä½•åˆ é™¤ S3 ä¸Šçš„æ–‡ä»¶ï¼Ÿ

A: æ’ä»¶ç›®å‰ä¸æ”¯æŒè‡ªåŠ¨åˆ é™¤åŠŸèƒ½ã€‚ä½ éœ€è¦æ‰‹åŠ¨åœ¨ S3 æ§åˆ¶å°ä¸­åˆ é™¤ä¸éœ€è¦çš„æ–‡ä»¶ã€‚

### Q: åŒæ­¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: è¯·æ£€æŸ¥ï¼š
1. S3 é…ç½®æ˜¯å¦æ­£ç¡®
2. ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. S3 å­˜å‚¨æ¡¶æƒé™æ˜¯å¦è¶³å¤Ÿ
4. æŸ¥çœ‹ Zotero çš„è°ƒè¯•è¾“å‡ºï¼ˆå¸®åŠ© -> è°ƒè¯•è¾“å‡ºæ—¥å¿—ï¼‰

## è®¸å¯è¯

AGPL-3.0-or-later

## è‡´è°¢

æœ¬æ’ä»¶åŸºäº [Zotero Plugin Template](https://github.com/windingwind/zotero-plugin-template) æ„å»ºã€‚
