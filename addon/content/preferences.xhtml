<linkset>
  <html:link rel="localization" href="__addonRef__-preferences.ftl" />
</linkset>
<groupbox
  onload="Zotero.__addonInstance__.hooks.onPrefsEvent('load', { window })"
>
  <label><html:h2 data-l10n-id="pref-title"></html:h2></label>

  <!-- S3 Configuration Section -->
  <label><html:h3 data-l10n-id="pref-s3-title"></html:h3></label>

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-s3-endpoint"
      data-l10n-id="pref-s3-endpoint"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-s3-endpoint"
      preference="s3.endpoint"
      style="flex: 1"
      placeholder="https://s3.amazonaws.com"
    ></html:input>
  </hbox>

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-s3-region"
      data-l10n-id="pref-s3-region"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-s3-region"
      preference="s3.region"
      style="flex: 1"
      placeholder="us-east-1"
    ></html:input>
  </hbox>

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-s3-bucketName"
      data-l10n-id="pref-s3-bucket"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-s3-bucketName"
      preference="s3.bucketName"
      style="flex: 1"
      placeholder="my-zotero-bucket"
    ></html:input>
  </hbox>

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-s3-accessKeyId"
      data-l10n-id="pref-s3-access-key"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-s3-accessKeyId"
      preference="s3.accessKeyId"
      style="flex: 1"
      placeholder="Access Key ID"
    ></html:input>
  </hbox>

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-s3-secretAccessKey"
      data-l10n-id="pref-s3-secret-key"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="password"
      id="zotero-prefpane-__addonRef__-s3-secretAccessKey"
      preference="s3.secretAccessKey"
      style="flex: 1"
      placeholder="Secret Access Key"
    ></html:input>
  </hbox>

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-s3-prefix"
      data-l10n-id="pref-s3-prefix"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="text"
      id="zotero-prefpane-__addonRef__-s3-prefix"
      preference="s3.prefix"
      style="flex: 1"
      placeholder="zotero-attachments"
    ></html:input>
  </hbox>

  <hbox>
    <button
      id="zotero-prefpane-__addonRef__-test-connection"
      data-l10n-id="pref-test-connection"
      oncommand="
        Zotero.__addonInstance__.hooks.onPrefsEvent('testConnection', {
          window,
        })
      "
    />
  </hbox>

  <!-- Sync Settings Section -->
  <label><html:h3 data-l10n-id="pref-sync-title"></html:h3></label>

  <checkbox
    id="zotero-prefpane-__addonRef__-auto-sync"
    preference="sync.autoSync"
    data-l10n-id="pref-auto-sync"
  />

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-conflict-resolution"
      data-l10n-id="pref-conflict-resolution"
      style="min-width: 150px"
    ></html:label>
    <menulist
      id="zotero-prefpane-__addonRef__-conflict-resolution"
      preference="conflictResolution"
      style="flex: 1"
    >
      <menupopup>
        <menuitem label="Ask me (询问我)" value="ask" />
        <menuitem label="Newer wins (较新者优先)" value="newer-wins" />
        <menuitem label="Local wins (本地优先)" value="local-wins" />
        <menuitem label="Remote wins (远程优先)" value="remote-wins" />
      </menupopup>
    </menulist>
  </hbox>

  <checkbox
    id="zotero-prefpane-__addonRef__-incremental-sync"
    preference="sync.incremental"
    data-l10n-id="pref-incremental-sync"
  />

  <hbox align="center">
    <html:label
      for="zotero-prefpane-__addonRef__-incremental-max-days"
      data-l10n-id="pref-incremental-max-days"
      style="min-width: 150px"
    ></html:label>
    <html:input
      type="number"
      id="zotero-prefpane-__addonRef__-incremental-max-days"
      preference="sync.incrementalMaxDays"
      min="1"
      max="30"
      style="width: 80px"
    ></html:input>
    <html:label style="margin-left: 5px">days (天)</html:label>
  </hbox>
</groupbox>
<vbox>
  <html:label
    data-l10n-id="pref-help"
    data-l10n-args='{"time": "__buildTime__","name": "__addonName__","version":"__buildVersion__"}'
  ></html:label>
</vbox>
